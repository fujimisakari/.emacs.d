#! /bin/bash

#/usr/bin/mcs -r:/Applications/Unity/Unity.app/Contents/Frameworks/Managed/UnityEngine.dll,/Applications/Unity/Unity.app/Contents/Frameworks/Managed/UnityEditor.dll,/Users/username/project/Unity/project/simpledata/Library/ScriptAssemblies/Assembly-CSharp.dll $1 -target:library
/usr/bin/mcs -r:/Applications/Unity/Unity.app/Contents/Frameworks/Managed/UnityEngine.dll,/Applications/Unity/Unity.app/Contents/Frameworks/Managed/UnityEditor.dll $1 -target:library

dll_file=`echo $1 | sed -e "s/\.cs/.dll/"`
ls ${dll_file} && rm ${dll_file}
/usr/bin/mono ~/.emacs.d/bin/StyleCopCLI.exe -cs $PWD/$1 -out /tmp/stylecop.log
cat /tmp/stylecop.log | sed -e "s/\"//g" | sed -e "s/>/ /g" | grep -v "SA1004\|SA1008\|SA1126\|SA1201\|SA1208\|SA1305\|SA1307\|SA1400\|SA1401\|SA1407\|SA1502\|SA1503\|SA1506\|SA1515\|SA1516\|SA1600\|SA1602\|SA1604\|SA1633"
ls $PWD/StyleCop.Cache && rm $PWD/StyleCop.Cache

# SA1004 The documentation header line must start with a single space.
# SA1008 Invalid spacing around the opening parenthesis.
# SA1126 The call to xxxx must begin with the 'this.', 'base.', 'object.' or 'XXX.' prefix to indicate the intended method call.
# SA1201 All enums must be placed after all fields.
# SA1208 System using directives must be placed before all other using directives.
# SA1305 The variable name 'xxxx' begins with a prefix that looks like Hungarian notation. Remove the prefix or add it to the list of allowed prefixes.
# SA1307 Public and internal fields must start with an upper-case letter: xxxx
# SA1400 The method must have an access modifier.
# SA1401 Fields must be declared with private access. Use properties to expose fields.
# SA1407 Insert parenthesis within the arithmetic expression to declare the operator precedence.
# SA1502 The enum must not be placed on a single line. The opening and closing curly brackets must each be placed on their own line.
# SA1503 The body of the if statement must be wrapped in opening and closing curly brackets.
# SA1506 A documentation header line must not be followed by a blank line.
# SA1515 A single-line comment must be preceded by a blank line or another single-line comment, or must be the first item in its scope. To ignore this error when commenting out a line of code, begin the comment with '////' rather than '//'.
# SA1516 Adjacent elements must be separated by a blank line.
# SA1600 The class must have a documentation header.
# SA1602 The enumeration sub-item must have a documentation header.
# SA1604 The documentation header must have a summary tag.
# SA1633 The file has no header, the header Xml is invalid, or the header is not located at the top of the file.

true
